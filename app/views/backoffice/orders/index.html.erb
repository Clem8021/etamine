<%= render "shared/navbar" %>

<div class="admin-container">
  <header class="admin-header">
    <h1 class="admin-title">ğŸ“¦ Commandes payÃ©es</h1>
    <p class="admin-subtitle">
      <%= @orders.count %> commande(s) confirmÃ©e(s)
    </p>
  </header>

  <% if @orders.any? %>
    <div class="admin-table-wrapper">
      <table class="admin-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Date</th>
            <th>Client</th>
            <th>Montant</th>
            <th>Livraison</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <% @orders.each do |order| %>
            <tr>
              <td class="order-id">#<%= order.id %></td>

              <td>
                <%= l(order.created_at, format: :short) %>
              </td>

              <td>
                <strong><%= order.full_name.presence || "InvitÃ©" %></strong><br>
                <small class="muted"><%= order.email %></small>
              </td>

              <td class="amount">
                <%= number_to_currency(order.total_due, unit: "â‚¬") %>
              </td>

              <td>
                <% if order.delivery_detail&.mode == "delivery" %>
                  <span class="badge badge-delivery">ğŸšš Livraison</span>
                <% else %>
                  <span class="badge badge-pickup">ğŸª Retrait</span>
                <% end %>
              </td>

              <td class="actions">
                <%= link_to "Voir",
                  backoffice_order_path(order),
                  class: "btn btn-sm btn-outline" %>

                <%= button_to "Supprimer",
                  backoffice_order_path(order),
                  method: :delete,
                  data: {
                    turbo_confirm: "âš ï¸ ÃŠtes-vous sÃ»re de vouloir supprimer dÃ©finitivement cette commande ?"
                  },
                  class: "btn btn-sm btn-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="empty-state">
      <p>ğŸŒ¸ Aucune commande payÃ©e pour le moment.</p>
    </div>
  <% end %>
</div>
