<div id="cart-container" class="cart-container" data-controller="cart">
  <a href="#"
     class="cart-icon"
     title="Voir le panier"
     data-action="click->cart#toggle">
    <svg xmlns="http://www.w3.org/2000/svg" class="cart-svg" viewBox="0 0 24 24" fill="white" width="24" height="24">
      <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10
      0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.16
      14l.84-2h7.45c.75 0 1.41-.41 1.75-1.03L21 4H5.21L4.27
      2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7.16z"/>
    </svg>
    <% if current_order.order_items.any? %>
      <span id="cart-counter"
            class="cart-count"
            data-cart-target="counter"><%= current_order.order_items.sum(&:quantity) %></span>
    <% end %>
  </a>

  <!-- Menu caché -->
  <div class="cart-dropdown hidden" data-cart-target="menu">
    <% if current_order.order_items.any? %>
      <ul class="cart-items">
        <% current_order.order_items.each do |item| %>
          <li>
            <strong><%= item.product.name %></strong> × <%= item.quantity %><br>
            <small><%= item.color %> | <%= item.size %></small>
          </li>
        <% end %>
      </ul>
      <p class="cart-total">
        Total :
        <%= number_to_currency(current_order.total_price, unit: "€") %>
      </p>
      <%= link_to "Voir mon panier", order_path(current_order), class: "btn-cart-link" %>
    <% else %>
      <p class="empty-cart">Votre panier est vide.</p>
    <% end %>
  </div>
</div>
